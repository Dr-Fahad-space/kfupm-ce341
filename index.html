<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CE341 - Transportation Engineering</title>
  <style>
    :root {
      --primary: #5B6D92;
      --primary-soft: #D5E3E6;
      --primary-light: #E8F0F2;
      --neutral: #F0E2D2;
      --neutral-soft: #EFEEE5;
      --accent: #D18266;
      --text-primary: #364042;
      --text-muted: #6B7280;
      --text-light: #FFFFFF;
      --bg-primary: #FFFFFF;
      --bg-secondary: #F7F6F2;
      --border: rgba(54,64,66,0.10);
      --shadow-card: 0 4px 20px rgba(54,64,66,0.08);
      --font-heading: Palatino, "Palatino Linotype", "Book Antiqua", Baskerville, Garamond, Georgia, serif;
      --font-body: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--font-body);
      color: var(--text-primary);
      background: radial-gradient(900px 480px at 15% -10%, rgba(255,255,255,0.9) 0%, rgba(247,246,242,0.95) 55%, #F7F6F2 100%),
                  radial-gradient(900px 480px at 85% 0%, rgba(244,244,239,0.9) 0%, rgba(247,246,242,0.95) 55%, #F7F6F2 100%);
      background-attachment: fixed;
      line-height: 1.65;
      min-height: 100vh;
    }
    h1, h2, h3, h4, h5, h6 { font-family: var(--font-heading); font-weight: 600; line-height: 1.3; }
    .app-container { display: flex; min-height: 100vh; }
    .sidebar {
      width: 280px;
      background: var(--bg-primary);
      border-right: 1px solid var(--border);
      position: fixed;
      height: 100vh;
      left: 0;
      top: 0;
      z-index: 100;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 20px var(--shadow-card);
    }
    .sidebar-header {
      padding: 24px;
      background: linear-gradient(135deg, var(--primary) 0%, rgba(91,109,146,0.95) 100%);
      color: var(--text-light);
    }
    .course-code {
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      opacity: 0.85;
      margin-bottom: 4px;
    }
    .course-title {
      font-family: var(--font-heading);
      font-size: 1.25rem;
      font-weight: 600;
    }
    .sidebar-nav {
      flex: 1;
      overflow-y: auto;
      padding: 16px 0;
    }
    .nav-section-title {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      padding: 0 24px;
      margin: 16px 0 8px;
    }
    .nav-list { list-style: none; }
    .nav-item { margin: 2px 0; }
    .nav-link {
      display: flex;
      align-items: center;
      padding: 12px 24px;
      color: var(--text-primary);
      font-size: 0.95rem;
      font-weight: 500;
      transition: all 0.15s ease;
      position: relative;
      cursor: pointer;
    }
    .nav-link::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: var(--accent);
      opacity: 0;
      transition: opacity 0.15s ease;
    }
    .nav-link:hover { background: var(--primary-light); color: var(--primary); }
    .nav-link:hover::before { opacity: 0.5; }
    .nav-link.active {
      background: linear-gradient(90deg, var(--primary-light) 0%, rgba(213,227,230,0.5) 100%);
      color: var(--primary);
      font-weight: 600;
    }
    .nav-link.active::before { opacity: 1; }
    .nav-icon {
      width: 20px;
      height: 20px;
      margin-right: 12px;
      opacity: 0.7;
    }
    .nav-link:hover .nav-icon,
    .nav-link.active .nav-icon { opacity: 1; }
    .sidebar-footer {
      padding: 16px 24px;
      border-top: 1px solid var(--border);
      background: var(--neutral-soft);
    }
    .instructor-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
    }
    .instructor-name {
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.9rem;
    }
    .main-content {
      flex: 1;
      margin-left: 280px;
      min-height: 100vh;
    }
    .mobile-toggle {
      display: none;
      position: fixed;
      top: 16px;
      left: 16px;
      z-index: 200;
      width: 44px;
      height: 44px;
      background: var(--bg-primary);
      border: 1px solid var(--border);
      border-radius: 10px;
      box-shadow: var(--shadow-card);
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .content-wrapper {
      padding: 32px;
      max-width: 1000px;
    }
    .chapter-container {
      background: var(--bg-primary);
      border-radius: 16px;
      box-shadow: var(--shadow-card);
      border: 1px solid var(--border);
      overflow: hidden;
    }
    .chapter-header {
      background: linear-gradient(135deg, var(--primary) 0%, rgba(91,109,146,0.92) 55%, rgba(91,109,146,0.86) 100%);
      color: var(--text-light);
      padding: 48px;
    }
    .chapter-number {
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      opacity: 0.9;
      margin-bottom: 8px;
    }
    .chapter-title {
      font-family: var(--font-heading);
      font-size: 2.25rem;
      font-weight: 600;
      margin-bottom: 16px;
    }
    .chapter-subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
    }
    .chapter-body { padding: 48px; }
    .content-section { margin-bottom: 48px; }
    .content-section:last-child { margin-bottom: 0; }
    .section-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--primary-soft);
    }
    .section-icon {
      width: 36px;
      height: 36px;
      background: var(--primary-soft);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
    }
    .section-title {
      font-family: var(--font-heading);
      font-size: 1.5rem;
      color: var(--primary);
    }
    .section-content {
      font-size: 1rem;
      line-height: 1.8;
    }
    .section-content p { margin-bottom: 16px; }
    .objectives-list {
      list-style: none;
      display: grid;
      gap: 16px;
    }
    .objective-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px 24px;
      background: linear-gradient(180deg, rgba(239,238,229,0.6) 0%, rgba(213,227,230,0.3) 100%);
      border-radius: 12px;
      border: 1px solid var(--border);
      border-left: 4px solid var(--accent);
    }
    .objective-number {
      width: 28px;
      height: 28px;
      background: var(--accent);
      color: var(--text-light);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 700;
      flex-shrink: 0;
    }
    .example-box {
      background: linear-gradient(180deg, rgba(240,226,210,0.7) 0%, rgba(239,238,229,0.92) 100%);
      border-radius: 12px;
      padding: 24px;
      border: 1px solid var(--border);
      border-left: 5px solid var(--accent);
      margin: 24px 0;
    }
    .example-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 16px;
    }
    .example-badge {
      background: var(--accent);
      color: var(--text-light);
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 4px 10px;
      border-radius: 6px;
    }
    .example-title {
      font-weight: 600;
      color: var(--primary);
      font-family: var(--font-heading);
    }
    .problem-box {
      background: var(--bg-primary);
      border: 2px solid var(--primary-soft);
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
    }
    .problem-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }
    .problem-marks {
      background: var(--primary);
      color: var(--text-light);
      font-size: 0.8rem;
      font-weight: 700;
      padding: 4px 12px;
      border-radius: 999px;
    }
    .solution-details {
      margin-top: 16px;
      border-radius: 10px;
      background: var(--bg-primary);
      border: 1px solid rgba(91,109,146,0.22);
      overflow: hidden;
    }
    .solution-summary {
      list-style: none;
      cursor: pointer;
      padding: 14px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(180deg, rgba(213,227,230,0.4) 0%, rgba(239,238,229,0.7) 100%);
      font-weight: 600;
      color: var(--primary);
    }
    .solution-summary::-webkit-details-marker { display: none; }
    .solution-badge {
      width: 24px;
      height: 24px;
      background: var(--accent);
      color: var(--text-light);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      margin-right: 8px;
    }
    .solution-content {
      padding: 16px;
      line-height: 1.9;
    }
    .solution-chevron {
      width: 20px;
      height: 20px;
      transition: transform 0.15s ease;
    }
    .solution-details[open] .solution-chevron { transform: rotate(180deg); }
    .key-term {
      background: var(--primary-light);
      color: var(--primary);
      padding: 2px 8px;
      border-radius: 4px;
      font-weight: 500;
    }
    .formula-box {
      background: var(--neutral-soft);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px 24px;
      margin: 16px 0;
      text-align: center;
      font-family: "Times New Roman", Times, serif;
      font-size: 1.1rem;
    }
    .quiz-container {
      background: var(--bg-primary);
      border-radius: 16px;
      box-shadow: var(--shadow-card);
      border: 1px solid var(--border);
      overflow: hidden;
    }
    .quiz-header {
      background: linear-gradient(135deg, var(--primary) 0%, rgba(91,109,146,0.92) 55%, rgba(91,109,146,0.86) 100%);
      color: var(--text-light);
      padding: 32px 48px;
    }
    .quiz-header-top {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 16px;
    }
    .quiz-title {
      font-family: var(--font-heading);
      font-size: 1.9rem;
    }
    .quiz-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 18px;
      margin-top: 16px;
      font-size: 0.95rem;
    }
    .meta-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(239,238,229,0.12);
      border: 1px solid rgba(239,238,229,0.18);
    }
    .quiz-instructions {
      margin: 24px 48px 0;
      padding: 16px 24px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(240,226,210,0.7) 0%, rgba(239,238,229,0.92) 100%);
      border: 1px solid var(--border);
      border-left: 6px solid var(--accent);
    }
    .quiz-instructions h3 {
      font-size: 1.05rem;
      color: var(--primary);
      margin-bottom: 6px;
    }
    .quiz-content { padding: 32px 48px; }
    .question-block {
      margin-bottom: 24px;
      padding: 24px;
      background: linear-gradient(180deg, rgba(239,238,229,0.92) 0%, rgba(213,227,230,0.22) 100%);
      border-radius: 14px;
      border: 1px solid var(--border);
      border-left: 6px solid rgba(91,109,146,0.95);
      box-shadow: var(--shadow-card);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    .question-block:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(54,64,66,0.12);
      border-left-color: var(--accent);
    }
    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 16px;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }
    .question-title {
      font-size: 1.08rem;
      font-weight: 700;
      color: var(--primary);
    }
    .marks-badge {
      background: var(--accent);
      color: var(--neutral-soft);
      padding: 6px 12px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 0.9rem;
    }
    .bloom-level {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.85rem;
      background: rgba(213,227,230,0.95);
      border: 1px solid rgba(91,109,146,0.22);
      margin-bottom: 8px;
    }
    .question-text {
      font-size: 1.02rem;
      line-height: 1.9;
      margin: 8px 0;
    }
    .answer-details {
      margin-top: 16px;
      border-radius: 12px;
      background: var(--bg-primary);
      border: 1px solid rgba(91,109,146,0.2);
      overflow: hidden;
    }
    .answer-summary {
      list-style: none;
      cursor: pointer;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(180deg, rgba(213,227,230,0.35) 0%, rgba(239,238,229,0.7) 100%);
      font-weight: 700;
      color: var(--primary);
    }
    .answer-summary::-webkit-details-marker { display: none; }
    .answer-badge {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: var(--accent);
      color: var(--text-light);
      font-weight: 700;
      font-size: 0.85rem;
      margin-right: 8px;
    }
    .answer-chevron {
      width: 18px;
      height: 18px;
      transition: transform 0.15s ease;
    }
    .answer-details[open] .answer-chevron { transform: rotate(180deg); }
    .answer-body {
      padding: 16px 24px;
      line-height: 1.9;
    }
    .answer-body ul { margin: 8px 0 0 24px; }
    .answer-body li { margin: 6px 0; }
    .answer-body strong { color: var(--primary); }
    .quiz-footer {
      background: rgba(213,227,230,0.7);
      border-top: 1px solid var(--border);
      padding: 24px 48px;
      font-size: 0.92rem;
      text-align: center;
    }
    .toggle-all-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid rgba(239,238,229,0.22);
      background: rgba(209,130,102,0.25);
      color: var(--text-light);
      cursor: pointer;
      font-weight: 700;
      font-size: 0.95rem;
      transition: all 0.15s ease;
    }
    .toggle-all-btn:hover {
      background: rgba(209,130,102,0.35);
      transform: translateY(-1px);
    }
    .chapter-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 48px;
      padding-top: 32px;
      border-top: 1px solid var(--border);
    }
    .nav-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      border-radius: 10px;
      font-weight: 600;
      font-size: 0.95rem;
      transition: all 0.15s ease;
      cursor: pointer;
      border: none;
    }
    .nav-btn-primary {
      background: var(--primary);
      color: var(--text-light);
    }
    .nav-btn-primary:hover {
      background: var(--accent);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(91,109,146,0.3);
    }
    .nav-btn-secondary {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }
    .nav-btn-secondary:hover {
      background: var(--primary-light);
      color: var(--primary);
    }
    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    .view-container { display: none; }
    .view-container.active { display: block; }
    @media (max-width: 1024px) {
      .sidebar { transform: translateX(-100%); transition: transform 0.3s ease; }
      .sidebar.open { transform: translateX(0); }
      .main-content { margin-left: 0; }
      .mobile-toggle { display: flex; }
      .content-wrapper { padding: 80px 16px 32px; }
    }
    @media (max-width: 768px) {
      .sidebar { width: 100%; }
      .chapter-title { font-size: 1.75rem; }
      .chapter-header, .chapter-body, .quiz-header, .quiz-content { padding: 24px; }
      .quiz-instructions { margin: 16px 24px 0; }
      .chapter-navigation { flex-direction: column; gap: 16px; }
      .nav-btn { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <button class="mobile-toggle" onclick="toggleSidebar()" aria-label="Toggle menu">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 12h18M3 6h18M3 18h18"/>
      </svg>
    </button>

    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="course-code">Course Code</div>
        <div class="course-title">CE341 - Transportation Engineering</div>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section-title">Course Content</div>
        <ul class="nav-list">
          <li class="nav-item">
            <a class="nav-link" onclick="showView('chapter1')">
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
              <span>Chapter 1</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" onclick="showView('chapter2')">
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
              <span>Chapter 2</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" onclick="showView('chapter3')">
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
              <span>Chapter 3</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" onclick="showView('chapter4')">
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
              <span>Chapter 4</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" onclick="showView('chapter5')">
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
              <span>Chapter 5</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" onclick="showView('chapter6')">
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
              <span>Chapter 6</span>
            </a>
          </li>
        </ul>
        <div class="nav-section-title">Assessments</div>
        <ul class="nav-list">
          <li class="nav-item">
            <a class="nav-link" onclick="showView('quiz')">
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 11l3 3L22 4"/>
                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
              </svg>
              <span>Quiz Section</span>
            </a>
          </li>
        </ul>
      </nav>
      <div class="sidebar-footer">
        <div class="instructor-label">Instructor</div>
        <div class="instructor-name">Dr. Fahad Alqahtani</div>
      </div>
    </aside>

    <main class="main-content">
      <div class="content-wrapper">
        
        <!-- Chapter 1 -->
        <div id="chapter1" class="view-container">
          <div class="chapter-container">
            <div class="chapter-header">
              <div class="chapter-number">Chapter 1</div>
              <h1 class="chapter-title">Introduction to Transportation Engineering</h1>
              <p class="chapter-subtitle">Overview of transportation systems and the role of transportation engineers.</p>
            </div>
            <div class="chapter-body">
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Learning Objectives</h2>
                </div>
                <div class="section-content">
                  <ul class="objectives-list">
                    <li class="objective-item">
                      <span class="objective-number">1</span>
                      <span class="objective-text">Understand the fundamental concepts of transportation engineering</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">2</span>
                      <span class="objective-text">Identify the four main components of a transportation system</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">3</span>
                      <span class="objective-text">Differentiate between mobility and accessibility</span>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="chapter-navigation">
                <button class="nav-btn nav-btn-secondary" disabled>Previous</button>
                <button class="nav-btn nav-btn-primary" onclick="showView('chapter2')">Next Chapter →</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Chapter 2 -->
        <div id="chapter2" class="view-container">
          <div class="chapter-container">
            <div class="chapter-header">
              <div class="chapter-number">Chapter 2</div>
              <h1 class="chapter-title">Transportation Systems Components</h1>
              <p class="chapter-subtitle">Users, vehicles, infrastructure, and control systems.</p>
            </div>
            <div class="chapter-body">
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Learning Objectives</h2>
                </div>
                <div class="section-content">
                  <ul class="objectives-list">
                    <li class="objective-item">
                      <span class="objective-number">1</span>
                      <span class="objective-text">Analyze the characteristics of transportation system users</span                    </li>
                    <li class="objective-item">
                      <span class="objective-number">2</span>
                      <span class="objective-text">Understand vehicle characteristics and their impact on system design</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">3</span>
                      <span class="objective-text">Examine infrastructure components and their functions</span>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="chapter-navigation">
                <button class="nav-btn nav-btn-secondary" onclick="showView('chapter1')">← Previous</button>
                <button class="nav-btn nav-btn-primary" onclick="showView('chapter3')">Next Chapter →</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Chapter 3 (Default Active) -->
        <div id="chapter3" class="view-container active">
          <div class="chapter-container">
            <div class="chapter-header">
              <div class="chapter-number">Chapter 3</div>
              <h1 class="chapter-title">Human Factors in Transportation</h1>
              <p class="chapter-subtitle">Understanding driver behavior, perception, reaction time, and safety considerations.</p>
            </div>
            <div class="chapter-body">
              
              <!-- Learning Objectives -->
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Learning Objectives</h2>
                </div>
                <div class="section-content">
                  <ul class="objectives-list">
                    <li class="objective-item">
                      <span class="objective-number">1</span>
                      <span class="objective-text">Understand human perception and information processing in driving tasks</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">2</span>
                      <span class="objective-text">Calculate perception-reaction time and its effect on stopping sight distance</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">3</span>
                      <span class="objective-text">Analyze factors affecting driver performance and safety</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">4</span>
                      <span class="objective-text">Apply human factors principles to transportation design</span>
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Content Section -->
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Key Concepts</h2>
                </div>
                <div class="section-content">
                  <p><span class="key-term">Perception-Reaction Time (PRT)</span> is the time interval between when a driver detects a hazard and when they begin to react to it. This consists of four stages: detection, identification, decision, and response.</p>
                  
                  <p>The standard perception-reaction time used in highway design is <strong>2.5 seconds</strong> for stopping sight distance calculations. However, this can vary based on:</p>
                  
                  <ul style="margin: 16px 0; padding-left: 24px;">
                    <li style="margin: 8px 0;">Driver age and experience</li>
                    <li style="margin: 8px 0;">Complexity of the driving task</li>
                    <li style="margin: 8px 0;">Environmental conditions</li>
                    <li style="margin: 8px 0;">Fatigue and alertness level</li>
                  </ul>

                  <div class="formula-box">
                    Stopping Sight Distance (SSD) = Perception-Reaction Distance + Braking Distance
                    <br><br>
                    SSD = v × t + v² / (2 × a)
                    <br><br>
                    Where: v = velocity, t = perception-reaction time, a = deceleration rate
                  </div>
                </div>
              </div>

              <!-- Example Section -->
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Worked Example</h2>
                </div>
                <div class="section-content">
                  <div class="example-box">
                    <div class="example-header">
                      <span class="example-badge">Example 3.1</span>
                      <span class="example-title">Stopping Sight Distance Calculation</span>
                    </div>
                    <div class="example-content">
                      <p>A vehicle is traveling at 80 km/h on a level highway. Calculate the required stopping sight distance assuming a perception-reaction time of 2.5 seconds and a deceleration rate of 3.4 m/s².</p>
                      
                      <div class="solution-details">
                        <details>
                          <summary class="solution-summary">
                            <span style="display: flex; align-items: center;">
                              <span class="solution-badge">✓</span>
                              <span>View Solution</span>
                            </span>
                            <svg class="solution-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9l6 6 6-6"/>
                            </svg>
                          </summary>
                          <div class="solution-content">
                            <p><strong>Step 1:</strong> Convert velocity to m/s<br>
                            v = 80 km/h × (1000 m/km) / (3600 s/h) = 22.22 m/s</p>
                            
                            <p><strong>Step 2:</strong> Calculate perception-reaction distance<br>
                            d_p = v × t = 22.22 m/s × 2.5 s = 55.56 m</p>
                            
                            <p><strong>Step 3:</strong> Calculate braking distance<br>
                            d_b = v² / (2 × a) = (22.22)² / (2 × 3.4) = 493.83 / 6.8 = 72.62 m</p>
                            
                            <p><strong>Step 4:</strong> Total stopping sight distance<br>
                            SSD = d_p + d_b = 55.56 + 72.62 = <strong>128.18 m</strong></p>
                          </div>
                        </details>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Practice Problems -->
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Practice Problems</h2>
                </div>
                <div class="section-content">
                  
                  <div class="problem-box">
                    <div class="problem-header">
                      <span class="problem-title">Problem 3.1</span>
                      <span class="problem-marks">5 marks</span>
                    </div>
                    <p class="problem-statement">
                      A driver traveling at 100 km/h on a wet pavement needs to stop for an unexpected obstacle. 
                      Given a perception-reaction time of 2.5 seconds and a deceleration rate of 2.5 m/s² on wet pavement, 
                      calculate the total stopping distance required. How much additional distance is required compared to dry pavement conditions (a = 3.4 m/s²)?
                    </p>
                    <div class="solution-details">
                      <details>
                        <summary class="solution-summary">
                          <span style="display: flex; align-items: center;">
                            <span class="solution-badge">✓</span>
                            <span>View Solution</span>
                          </span>
                          <svg class="solution-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                          </svg>
                        </summary>
                        <div class="solution-content">
                          <p><strong>Wet Pavement:</strong><br>
                          v = 100 km/h = 27.78 m/s<br>
                          d_p = 27.78 × 2.5 = 69.44 m<br>
                          d_b = (27.78)² / (2 × 2.5) = 771.60 / 5 = 154.32 m<br>
                          SSD_wet = 69.44 + 154.32 = <strong>223.76 m</strong></p>
                          
                          <p><strong>Dry Pavement:</strong><br>
                          d_b = (27.78)² / (2 × 3.4) = 771.60 / 6.8 = 113.47 m<br>
                          SSD_dry = 69.44 + 113.47 = <strong>182.91 m</strong></p>
                          
                          <p><strong>Additional Distance:</strong> 223.76 - 182.91 = <strong>40.85 m</strong></p>
                        </div>
                      </details>
                    </div>
                  </div>

                  <div class="problem-box">
                    <div class="problem-header">
                      <span class="problem-title">Problem 3.2</span>
                      <span class="problem-marks">8 marks</span>
                    </div>
                    <p class="problem-statement">
                      An elderly driver has a perception-reaction time of 3.2 seconds compared to the standard 2.5 seconds. 
                      Calculate the additional stopping distance required at a speed of 60 km/h. Discuss the implications 
                      for highway design and whether different design standards should be considered for areas with high elderly driver populations.
                    </p>
                    <div class="solution-details">
                      <details>
                        <summary class="solution-summary">
                          <span style="display: flex; align-items: center;">
                            <span class="solution-badge">✓</span>
                            <span>View Solution</span>
                          </span>
                          <svg class="solution-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                          </svg>
                        </summary>
                        <div class="solution-content">
                          <p><strong>Calculation:</strong><br>
                          v = 60 km/h = 16.67 m/s<br>
                          Standard P-R distance = 16.67 × 2.5 = 41.67 m<br>
                          Elderly P-R distance = 16.67 × 3.2 = 53.33 m<br>
                          <strong>Additional distance required = 11.66 m</strong></p>
                          
                          <p><strong>Implications:</strong></p>
                          <ul>
                            <li>Longer sight distances needed at intersections</li>
                            <li>Larger sign lettering for readability</li>
                            <li>Longer yellow intervals at traffic signals</li>
                            <li>Consideration for reduced speed limits in senior communities</li>
                          </ul>
                        </div>
                      </details>
                    </div>
                  </div>

                </div>
              </div>

              <div class="chapter-navigation">
                <button class="nav-btn nav-btn-secondary" onclick="showView('chapter2')">← Previous</button>
                <button class="nav-btn nav-btn-primary" onclick="showView('chapter4')">Next Chapter →</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Chapter 4 -->
        <div id="chapter4" class="view-container">
          <div class="chapter-container">
            <div class="chapter-header">
              <div class="chapter-number">Chapter 4</div>
              <h1 class="chapter-title">Traffic Flow Theory</h1>
              <p class="chapter-subtitle">Fundamental relationships between speed, flow, and density.</p>
            </div>
            <div class="chapter-body">
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Learning Objectives</h2>
                </div>
                <div class="section-content">
                  <ul class="objectives-list">
                    <li class="objective-item">
                      <span class="objective-number">1</span>
                      <span class="objective-text">Understand the fundamental diagram of traffic flow</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">2</span>
                      <span class="objective-text">Apply the relationship q = k × v (flow = density × speed)</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">3</span>
                      <span class="objective-text">Analyze shock waves and traffic congestion</span>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="chapter-navigation">
                <button class="nav-btn nav-btn-secondary" onclick="showView('chapter3')">← Previous</button>
                <button class="nav-btn nav-btn-primary" onclick="showView('chapter5')">Next Chapter →</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Chapter 5 -->
        <div id="chapter5" class="view-container">
          <div class="chapter-container">
            <div class="chapter-header">
              <div class="chapter-number">Chapter 5</div>
              <h1 class="chapter-title">Highway Geometric Design</h1>
              <p class="chapter-subtitle">Alignment, cross-section elements, and design standards.</p>
            </div>
            <div class="chapter-body">
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Learning Objectives</h2>
                </div>
                <div class="section-content">
                  <ul class="objectives-list">
                    <li class="objective-item">
                      <span class="objective-number">1</span>
                      <span class="objective-text">Design horizontal and vertical alignments</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">2</span>
                      <span class="objective-text">Calculate sight distances and super elevation</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">3</span>
                      <span class="objective-text">Understand cross-section elements</span>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="chapter-navigation">
                <button class="nav-btn nav-btn-secondary" onclick="showView('chapter4')">← Previous</button>
                <button class="nav-btn nav-btn-primary" onclick="showView('chapter6')">Next Chapter →</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Chapter 6 -->
        <div id="chapter6" class="view-container">
          <div class="chapter-container">
            <div class="chapter-header">
              <div class="chapter-number">Chapter 6</div>
              <h1 class="chapter-title">Traffic Safety</h1>
              <p class="chapter-subtitle">Crash analysis, countermeasures, and safety management.</p>
            </div>
            <div class="chapter-body">
              <div class="content-section">
                <div class="section-header">
                  <div class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                  </div>
                  <h2 class="section-title">Learning Objectives</h2>
                </div>
                <div class="section-content">
                  <ul class="objectives-list">
                    <li class="objective-item">
                      <span class="objective-number">1</span>
                      <span class="objective-text">Analyze crash data and identify patterns</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">2</span>
                      <span class="objective-text">Apply engineering countermeasures for safety improvement</span>
                    </li>
                    <li class="objective-item">
                      <span class="objective-number">3</span>
                      <span class="objective-text">Understand road safety audits and inspections</span>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="chapter-navigation">
                <button class="nav-btn nav-btn-secondary" onclick="showView('chapter5')">← Previous</button>
                <button class="nav-btn nav-btn-primary" onclick="showView('quiz')">Go to Quiz →</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Quiz Section -->
        <div id="quiz" class="view-container">
          <div class="quiz-container">
            <div class="quiz-header">
              <div class="quiz-header-top">
                <div>
                  <h1 class="quiz-title">CE341: Transportation Engineering</h1>
                  <div class="quiz-subtitle">Quiz 1 - Chapters 1-3</div>
                </div>
                <button class="toggle-all-btn" onclick="toggleAllAnswers()" id="toggleAllBtn">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 7h12M6 12h12M6 17h12"/>
                  </svg>
                  Show All Answers
                </button>
              </div>
              <div class="quiz-meta">
                <div class="meta-pill"><strong>Instructor:</strong> Dr. Fahad Alqahtani</div>
                <div class="meta-pill"><strong>Total Marks:</strong> 15</div>
                <div class="meta-pill"><strong>Duration:</strong> 60 minutes</div>
              </div>
            </div>

            <div class="quiz-instructions">
              <h3>Instructions</h3>
              <p>Answer all questions. Be concise and precise. Show all calculations where applicable.</p>
            </div>

            <div class="quiz-content">
              
              <!-- Question 1 -->
              <div class="question-block">
                <div class="question-header">
                  <div class="question-title">Q1 – Conceptual Understanding</div>
                  <div class="marks-badge">2 marks</div>
                </div>
                <div class="bloom-level">Bloom's level: Understand</div>
                <div class="question-text">
                  Explain the difference between mobility and accessibility. Give one example where improving mobility does not necessarily improve accessibility.
                </div>
                <details class="answer-details">
                  <summary class="answer-summary">
                    <span class="answer-left">
                      <span class="answer-badge">✓</span>
                      <span>Answer:</span>
                    </span>
                    <svg class="answer-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </summary>
                  <div class="answer-body">
                    Mobility refers to how easily and efficiently movement occurs, while accessibility refers to how easily destinations can be reached. For example, increasing highway speeds may improve mobility but not accessibility if destinations remain far apart or poorly connected.
                  </div>
                </details>
              </div>

              <!-- Question 2 -->
              <div class="question-block">
                <div class="question-header">
                  <div class="question-title">Q2 – Transportation System Components</div>
                  <div class="marks-badge">2 marks</div>
                </div>
                <div class="bloom-level">Bloom's level: Remember</div>
                <div class="question-text">Identify the four main components of a transportation system.</div>
                <details class="answer-details">
                  <summary class="answer-summary">
                    <span class="answer-left">
                      <span class="answer-badge">✓</span>
                      <span>Answer:</span>
                    </span>
                    <svg class="answer-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </summary>
                  <div class="answer-body">
                    <ul>
                      <li>Users</li>
                      <li>Vehicles</li>
                      <li>Infrastructure</li>
                      <li>Control and management</li>
                    </ul>
                  </div>
                </details>
              </div>

              <!-- Question 3 -->
              <div class="question-block">
                <div class="question-header">
                  <div class="question-title">Q3 – Human Factors</div>
                  <div class="marks-badge">2 marks</div>
                </div>
                <div class="bloom-level">Bloom's level: Understand</div>
                <div class="question-text">
                  Why do human factors make transportation engineering more complex and less predictable than many other civil engineering disciplines?
                </div>
                <details class="answer-details">
                  <summary class="answer-summary">
                    <span class="answer-left">
                      <span class="answer-badge">✓</span>
                      <span>Answer:</span>
                    </span>
                    <svg class="answer-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </summary>
                  <div class="answer-body">
                    Transportation engineering is more complex because system performance depends on human perception, reaction time, judgment, and compliance, which vary among individuals and situations and cannot be fully controlled.
                  </div>
                </details>
              </div>

              <!-- Question 4 -->
              <div class="question-block">
                <div class="question-header">
                  <div class="question-title">Q4 – Stopping Sight Distance</div>
                  <div class="marks-badge">4 marks</div>
                </div>
                <div class="bloom-level">Bloom's level: Apply</div>
                <div class="question-text">
                  A vehicle is traveling at 90 km/h. Calculate the stopping sight distance required assuming:<br>
                  a) Perception-reaction time = 2.5 seconds<br>
                  b) Deceleration rate = 3.4 m/s²<br>
                  Show all steps clearly.
                </div>
                <details class="answer-details">
                  <summary class="answer-summary">
                    <span class="answer-left">
                      <span class="answer-badge">✓</span>
                      <span>Answer:</span>
                    </span>
                    <svg class="answer-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </summary>
                  <div class="answer-body">
                    <p><strong>Step 1:</strong> Convert velocity<br>v = 90 km/h = 25 m/s</p>
                    <p><strong>Step 2:</strong> Perception-reaction distance<br>d_p = 25 × 2.5 = 62.5 m</p>
                    <p><strong>Step 3:</strong> Braking distance<br>d_b = (25)² / (2 × 3.4) = 625 / 6.8 = 91.9 m</p>
                    <p><strong>Step 4:</strong> Total SSD = 62.5 + 91.9 = <strong>154.4 m</strong></p>
                  </div>
                </details>
              </div>

              <!-- Question 5 -->
              <div class="question-block">
                <div class="question-header">
                  <div class="question-title">Q5 – Disciplinary Scope</div>
                  <div class="marks-badge">2 marks</div>
                </div>
                <div class="bloom-level">Bloom's level: Understand</div>
                <div class="question-text">
                  Differentiate between transportation engineering and traffic engineering in terms of scope and primary focus.
                </div>
                <details class="answer-details">
                  <summary class="answer-summary">
                    <span class="answer-left">
                      <span class="answer-badge">✓</span>
                      <span>Answer:</span>
                    </span>
                    <svg class="answer-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </summary>
                  <div class="answer-body">
                    Transportation engineering focuses on system-wide planning, design, and integration across modes, while traffic engineering concentrates on roadway operations such as flow, control, and safety.
                  </div>
                </details>
              </div>

              <!-- Question 6 -->
              <div class="question-block">
                <div class="question-header">
                  <div class="question-title">Q6 – Application</div>
                  <div class="marks-badge">3 marks</div>
                </div>
                <div class="bloom-level">Bloom's level: Apply</div>
                <div class="question-text">
                  An urban arterial road experiences repeated severe crashes at the same location. Identify three different functional entities that should be involved in addressing this problem, and briefly state the role of each.
                </div>
                <details class="answer-details">
                  <summary class="answer-summary">
                    <span class="answer-left">
                      <span class="answer-badge">✓</span>
                      <span>Answer:</span>
                    </span>
                    <svg class="answer-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M6 9l6 6 6-6"/>
                    </svg>
                  </summary>
                  <div class="answer-body">
                    <ul>
                      <li><strong>Traffic enforcement authorities:</strong> address unsafe driving behavior and violations.</li>
                      <li><strong>Road or infrastructure authorities:</strong> implement engineering improvements such as redesign, signage, or lighting.</li>
                      <li><strong>National safety investigation bodies:</strong> analyze crash causes and issue system-level safety recommendations.</li>
                    </ul>
                  </div>
                </details>
              </div>

            </div>

            <div class="quiz-footer">
              <p>CE341: Transportation Engineering | Quiz 1 | Total Marks: 15</p>
              <p style="margin-top: 8px; opacity: 0.7;">Click "Show All Answers" to reveal all solutions</p>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

  <script>
    // Navigation functionality
    function showView(viewId) {
      // Hide all views
      document.querySelectorAll('.view-container').forEach(view => {
        view.classList.remove('active');
      });
      
      // Show selected view
      document.getElementById(viewId).classList.add('active');
      
      // Update navigation
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });
      
      // Find and activate the corresponding nav link
      const navLinks = document.querySelectorAll('.nav-link');
      navLinks.forEach(link => {
        if (link.getAttribute('onclick').includes(viewId)) {
          link.classList.add('active');
        }
      });
      
      // Close sidebar on mobile
      document.getElementById('sidebar').classList.remove('open');
      
      // Scroll to top
      window.scrollTo(0, 0);
    }

    // Mobile sidebar toggle
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }

    // Toggle all quiz answers
    let allAnswersOpen = false;
    function toggleAllAnswers() {
      const allDetails = document.querySelectorAll('.answer-details');
      const btn = document.getElementById('toggleAllBtn');
      
      allAnswersOpen = !allAnswersOpen;
      
      allDetails.forEach(details => {
        details.open = allAnswersOpen;
      });
      
      btn.innerHTML = allAnswersOpen 
        ? '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 7h12M6 12h12M6 17h12"/></svg> Hide All Answers'
        : '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 7h12M6 12h12M6 17h12"/></svg> Show All Answers';
    }

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', function(event) {
      const sidebar = document.getElementById('sidebar');
      const toggle = document.querySelector('.mobile-toggle');
      
      if (window.innerWidth <= 1024 && 
          !sidebar.contains(event.target) && 
          !toggle.contains(event.target) &&
          sidebar.classList.contains('open')) {
        sidebar.classList.remove('open');
      }
    });
  </script>
</body>
</html>
